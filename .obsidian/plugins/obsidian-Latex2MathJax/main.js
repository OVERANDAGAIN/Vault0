/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var p=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var u=(i,s)=>{for(var t in s)p(i,t,{get:s[t],enumerable:!0})},x=(i,s,t,e)=>{if(s&&typeof s=="object"||typeof s=="function")for(let a of h(s))!g.call(i,a)&&a!==t&&p(i,a,{get:()=>s[a],enumerable:!(e=d(s,a))||e.enumerable});return i};var m=i=>x(p({},"__esModule",{value:!0}),i);var $={};u($,{default:()=>l});module.exports=m($);var n=require("obsidian"),E={autoReplaceOnPaste:!1},l=class extends n.Plugin{constructor(){super(...arguments);this.pasteEventListener=null}async onload(){await this.loadSettings(),this.addSettingTab(new r(this.app,this)),this.applyPasteEventListener(),this.addCommand({id:"replace-latex-math-markers",name:"\u66FF\u6362\u9009\u4E2D\u5185\u5BB9\u4E2D\u7684 Latex \u6807\u8BB0\u4E3A MathJax \u6807\u8BB0",editorCallback:t=>{let e=t.getSelection();if(e){let a=this.replaceMathDelimitersInText(e);t.replaceSelection(a)}}}),this.addCommand({id:"replace-all-latex-math-markers",name:"\u66FF\u6362\u6587\u6863\u4E2D\u7684 Latex \u6807\u8BB0\u4E3A MathJax \u6807\u8BB0",editorCallback:t=>{let e=t.getValue(),a=this.replaceMathDelimitersInText(e);t.setValue(a)}})}applyPasteEventListener(){this.pasteEventListener&&this.app.workspace.off("editor-paste",this.pasteEventListener),this.settings.autoReplaceOnPaste?(this.pasteEventListener=(t,e)=>{var o;let a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a){let c=this.replaceMathDelimitersInText(a);c!==a&&(t.preventDefault(),e.replaceSelection(c))}},this.app.workspace.on("editor-paste",this.pasteEventListener)):this.pasteEventListener=null}replaceMathDelimitersInText(t){let e=t;return e=e.replace(/\\\(\s/g,"$").replace(/\s\\\)/g,"$").replace(/\\\[\s/g,"$$$$").replace(/\s\\\]/g,"$$$$"),e=e.replace(/\\\(/g,"$").replace(/\\\)/g,"$").replace(/\\\[/g,"$$$$").replace(/\\\]/g,"$$$$"),t!==e&&new n.Notice("\u{1F60A} \u6210\u529F\u66FF\u6362\u4E3A MathJax \u683C\u5F0F~"),e}async loadSettings(){this.settings=Object.assign({},E,await this.loadData()),this.applyPasteEventListener()}async saveSettings(){await this.saveData(this.settings),this.applyPasteEventListener()}},r=class extends n.PluginSettingTab{constructor(t,e){super(t,e);this.plugin=e}display(){let{containerEl:t}=this;t.empty(),new n.Setting(t).setName("\u542F\u7528\u81EA\u52A8\u66FF\u6362\u7C98\u8D34\u5185\u5BB9\u4E2D\u7684\u6570\u5B66\u6807\u8BB0").setDesc("\u542F\u7528\u540E\uFF0C\u7C98\u8D34\u7684\u5185\u5BB9\u4E2D\u7684 LaTeX \u6570\u5B66\u6807\u8BB0\u4F1A\u88AB\u81EA\u52A8\u66FF\u6362\u4E3A MathJax \u683C\u5F0F\u3002").addToggle(e=>e.setValue(this.plugin.settings.autoReplaceOnPaste).onChange(async a=>{this.plugin.settings.autoReplaceOnPaste=a,await this.plugin.saveSettings()}))}};
