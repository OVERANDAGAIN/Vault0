---
åˆ›å»ºæ—¶é—´: 2025-ä¸ƒæœˆ-21æ—¥  æ˜ŸæœŸä¸€, 3:20:39 ä¸‹åˆ
---





1. **å·²åˆæ­¥æ•´åˆ CleanRL + å¤šç­–ç•¥ PPO + å¼‚æ­¥ rollout çš„è®­ç»ƒæµç¨‹**ï¼›
2. **ç›®å‰æ­£åœ¨å¯¹é½åŸ HOP+ ä¸­ OMG æ¨¡å—çš„ç»“æ„é€»è¾‘ï¼Œç‰¹åˆ«æ˜¯ subgoal æ¨ç†ä¸ buffer ç®¡ç†éƒ¨åˆ†**ï¼›
3. **å›´ç»• ReplayBuffer ä¸ EpisodeBatch çš„æ•°æ®ç»„ç»‡æ–¹å¼è¿›è¡Œæ·±åº¦åˆ†æï¼Œä»¥è¯„ä¼°æ˜¯å¦æ•´ä½“å¤ç”¨ OMG è®¾è®¡æˆ–é‡æ„é€‚é…ç‰ˆæœ¬**ã€‚


### äºŒã€ã€æå‡ºçš„å…³é”®é—®é¢˜ï¼šOMG buffer æ˜¯å¦åº”è¯¥æ•´ä½“å¼•å…¥ï¼Ÿã€‘

#### ğŸ” èƒŒæ™¯

HOP+ ä¸­çš„ OMG æ¨¡å—ä½¿ç”¨ `ReplayBuffer` å’Œ `EpisodeBatch` æ”¯æŒï¼š

* agent-wise segment çš„ç»„ç»‡ï¼ˆæ¯ä¸ª agent çš„å®Œæ•´è½¨è¿¹ï¼‰ï¼›
* max\_seq\_lengthã€avail\_actionsã€subgoalã€filled maskã€terminated ç­‰æ—¶é—´åºåˆ—å¯¹é½ï¼›
* å¼‚æ­¥ episode æˆªæ–­ + è·¨ agent paddingï¼›
* å®šæœŸ OMG\_AMã€MOA æ¨¡å‹è®­ç»ƒè§¦å‘ï¼ˆå¸¦ `can_sample` æ£€æŸ¥ï¼‰ï¼›
* æ”¯æŒ `scheme/group` ç»“æ„ï¼Œä¾¿äºåç»­æ‹“å±•/åˆ†ç»„å¤„ç†ã€‚

#### ğŸ’¬ è®¨è®ºå»ºè®®

> â€œæ˜¯å¦ç»§ç»­ä½¿ç”¨â€å¹¶ä¸æ˜¯æ˜¯éé¢˜ï¼Œè€Œæ˜¯å¯ä»¥åœ¨ä¼šè®®ä¸­ä½œä¸º trade-off æŠ›å‡ºï¼Œå¼•å¯¼è®¨è®ºï¼Œæå‡ä½ åœ¨ç»„å†…æŠ€æœ¯æ€è€ƒçš„å½¢è±¡ã€‚

ä½ å¯ä»¥è¿™æ ·è¡¨è¾¾ï¼š

> å½“å‰æˆ‘ä»¬ CleanRL ç§»æ¤ç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯è¾ƒä¸ºç®€åŒ–çš„ `transition` å’Œ `agent_traj` æ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿæ»¡è¶³ rollout ä¸åŸºæœ¬è®­ç»ƒï¼Œä½†åœ¨å¤„ç†å¤šæ™ºèƒ½ä½“å¼‚æ­¥ç»ˆæ­¢ã€subgoal æ¨ç†ï¼ˆå¦‚æ—¶é—´å¯¹é½ã€å¡«å……ã€è·¨ agent ç»„ç»‡ï¼‰æ—¶å­˜åœ¨ä¸€å®šå±€é™ã€‚
>
> åŸ HOP+ çš„ `ReplayBuffer` + `EpisodeBatch` é€»è¾‘æ”¯æŒè¿™äº›ç‰¹æ€§ï¼Œä½†å¼•å…¥ä»£ä»·è¾ƒå¤§ï¼ˆéœ€è¦ç»´æŠ¤ `scheme/group`, å®šåˆ¶è®­ç»ƒè§¦å‘é€»è¾‘ï¼Œbatch padding å¤æ‚ï¼‰ã€‚
>
> âœ… æ‰€ä»¥æƒ³å¬å¬å¤§å®¶æ„è§ï¼Œæˆ‘ä»¬æ˜¯å¦éœ€è¦ï¼š
>
> 1. **å®Œå…¨è¿ç§»** OMG buffer ç³»ç»Ÿï¼ˆæˆæœ¬é«˜ï¼Œç¨³å®šæ€§å¼ºï¼‰ï¼›
> 2. **ä»¿ç…§ç»“æ„ç®€åŒ–è®¾è®¡**ä¸€ä¸ªè½»é‡ç‰ˆ EpisodeBatchï¼ˆå®šåˆ¶ä½†å¯æ§ï¼‰ï¼›
> 3. **åœ¨ç°æœ‰ç»“æ„ä¸Š patch å¼‚æ­¥ç»ˆæ­¢é€»è¾‘å’Œsubgoalå­˜å‚¨**ï¼ˆæœ€è½»ï¼Œä½†æœªæ¥å¯æ‰©å±•æ€§å·®ï¼‰ã€‚



#### ğŸ§  2. ç°æœ‰ rollout æ˜¯å¦ç¼ºä¹ time alignment æ ‡å‡†æœºåˆ¶ï¼Ÿ

* OMG buffer ä¸­ `filled`, `terminated`, `max_t_filled()`ï¼Œå®é™…ç”¨äºåŠ¨æ€ episode å‰ªè£ï¼›
* CleanRL å½“å‰ rollout å›ºå®šé•¿åº¦ï¼Œæ˜¯å¦è€ƒè™‘å¼•å…¥ç±»ä¼¼æœºåˆ¶åšå¼‚æ­¥ agent padding è£å‰ªï¼Ÿ
