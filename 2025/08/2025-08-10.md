---
创建时间: 2025-八月-11日  星期一, 3:55:02 下午
---


1. **数据维度不匹配**

   * `reward` 从数据加载出来 shape 是 `[B,1]`，而 loss 期望 `[B]`，导致运行时报 shape error。

2. **潜变量 batch 对不齐**

   * `ValueNet` 输入 latent 与 dynamics/encoder 输出的 latent 维度格式不一致，部分情况下多了一维时间或 batch。

3. **action mask 广播错误**

   * 多环境下规划时 action mask 与 latent batch 维度错位，导致非法动作被选中。

4. **loss 权重**

   * reward loss ，obs reconstruction loss 


1. **TD target 

   * DataLoader shuffle 导致 next\_obs 与当前 obs 未正确配对，ValueNet TD 目标。
