[[Alice in Differentiable Wonderland]]

# 问题：为什么$Y_{j}$ 那里需要转置？
p17


**Definition D.2.3 (Matrix multiplication)** Given two matrices **X** ∼ (a, b) and **Y** ∼ (b, c), matrix multiplication **Z = XY**, with **Z ∼ (a, c)** is defined element-wise as:

$$
Z_{ij} = \langle X_i, Y_j^{\top} \rangle \tag{E.2.4}
$$

i.e., the element (i, j) of the product is the dot product between the i-th row of **X** and the j-th column of **Y**.



# GPT-Answer
对，你抓到的这个点非常关键 ✅。我来帮你理清楚 **为什么教材里会出现这种“不一致”**：

---

## 1. 内积的定义

在这张图里：
![[Pasted image 20250923220631.png]]
$$
\langle x, y \rangle = x^\top y = \sum_i x_i y_i
$$

* 默认约定：向量 $x, y$ 都是 **列向量**（$(d,1)$）。
* 所以写成矩阵形式就是 $x^\top y$，结果是标量。

这里 $\langle \cdot, \cdot \rangle$ 表示 **两个同形状向量的内积**。

---

## 2. 矩阵乘法里的写法

在矩阵乘法时：

$$
Z_{ij} = \langle X_i, Y_j^\top \rangle
$$

看起来和上面的写法有点冲突。原因在于：

* $X_i$ 是 **行向量**（$(1, b)$）。
* $Y_j$ 是 **列向量**（$(b, 1)$）。

这两个如果直接放进 $\langle \cdot, \cdot \rangle$，在符号上不好看（一个是行向量，一个是列向量）。
所以书里把 $Y_j$ 转置了一下，写成 $Y_j^\top$，让它和 $X_i$ 变成 **同为行向量**，这样 $\langle \cdot, \cdot \rangle$ 的符号用起来更统一。

---

## 3. 为什么会觉得“不一致”

* **在内积定义时**：默认向量是列向量，所以写 $x^\top y$。
* **在矩阵乘法里**：为了凑成“行向量对行向量”的形式，就写了 $Y_j^\top$。

其实本质是一样的：

$$
Z_{ij} = \sum_{k=1}^b X_{ik} Y_{kj}
$$

只不过符号上有不同的「风格选择」。

---
「三种风格的对照表」：

1. 向量内积（列向量约定）
2. 向量内积（行向量约定）
3. 矩阵乘法（行 × 列形式）

这样你以后看到不同写法就不会混淆了。
