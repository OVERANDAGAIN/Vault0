---
创建时间: 2025-十二月-2日  星期二, 4:53:07 下午
---
# 计网小组作业
## 分工
1.公式1-12，图1-4，Table1
2.公式13-25，图5-8
3.公式26-37，图9-13
4.ppt+pre



## Motivation
缺乏系统性的数学模型分析，尤其是当 链路中断时间较长、随机发生时，LTP 的性能如何？


#  **《A Study of DTN for Reliable Data Delivery From  Space Station to Ground Station》名词 / 概念总结表**

| 类别           | 名词                        | 全称 / 定义                   | 在论文中的作用                       |           |
| ------------ | ------------------------- | ------------------------- | ----------------------------- | --------- |
| **通信方向**     | **Downlink（下行）**          | ISS → Ground（空间站到地面站）     | 发送**数据段 RDS**和**CP**；中断时破坏最大  |           |
|              | **Uplink（上行）**            | Ground → ISS（地面站到空间站）     | 发送**RS**、**RA**（反馈/确认）；中断影响较小 |           |
| **LTP 数据单元** | **RDS**                   | Red Data Segment          | 实际数据内容，需**可靠**送达              |           |
|              | **CP**                    | Checkpoint Segment        | 表示“一块数据发送完”，触发 RS；丢失代价极大      |           |
|              | **RS**                    | Report Segment            | 收方对 RDS 的“接收报告”               | 通知哪些数据段丢失 |
|              | **RA / ACK**              | Report Acknowledgment     | 发送方对 RS 的确认                   | 支持可靠反馈机制  |
| **链路状态**     | **Link Disruption（链路中断）** | 某时间段内链路完全不可用              | 论文分析的主角；影响重传机制                |           |
|              | **T_break（中断时长）**         | 中断持续时间                    | 越长重传越多，呈线性+阶梯式增长              |           |
| **误码与信道**    | **BER**                   | Bit Error Rate（比特误码率）     | 决定数据损坏概率，导致随机丢包               |           |
|              | **ρ_seg, ρ_cp, ρ_rs**     | Segment 的误码概率             | 用公式表示 BER 对不同类型段的影响           |           |
| **LTP 机制**   | **RTO（重传超时）**             | Retransmission Timeout    | 失去 RS/CP 后等待的超时时间             |           |
|              | **Towlt**                 | One-way Light Time 一向传播时延 | 由 ISS → GEO → Ground 决定       |           |
| **论文 Case**  | **Case 1（下行中断）**          | 中断打在 ISS→Ground 方向        | CP/RDS丢失 → 代价最大               |           |
|              | **Case 1-A**              | 中断发生在普通数据段期间              | 需要一次额外重传轮                     |           |
|              | **Case 1-B**              | 中断发生在 CP 期间               | 会多次触发 RTO，最严重                 |           |
|              | **Case 2（上行中断）**          | 中断打在 Ground→ISS 方向        | RS/ACK丢失 → 代价较小               |           |
| **数学量/符号**   | **$T_{RTT}$**             | 正常情况下一个 block 的往返时间       | 基线性能指标                        |           |
|              | **$T'_{RTT}$**            | 中断情况下的 RTT                | 模型输出之一                        |           |
|              | **$T_{break-affect}$**    | 中断对传输时间造成的额外影响            | 核心理论结果                        |           |
|              | **$T_{file-delivery}$**   | 文件总传输时间                   | 模型+实验对比的重点                    |           |
|              | **Goodput**               | 有效吞吐率                     | 文件大小 / 总时间                    |           |
|              | **$T_{seg}$、$T_{block}$** | Segment/block 传输时间        | 用于推导重传成本                      |           |
| **通信架构**     | **GEO Relay**             | 三颗 GEO 卫星接力下行             | 产生覆盖空洞 → 触发中断                 |           |
|              | **BP**                    | Bundle Protocol           | LTP 上层，不在本文重点                 |           |
|              | **ION DTN Stack**         | NASA 的 DTN 实验协议栈          | 全文实验平台                        |           |
| **研究方法**     | **理论建模**                  | 精确推导 T_break-affect 等     | Section IV 主要工作               |           |
|              | **实验验证**                  | 使用真实 ION 仿真空间链路           | Section V、VI                  |           |



---


# **论文内容结构总结表**

| 章节                              | 内容                                                    | 功能                                            |
| ------------------------------- | ----------------------------------------------------- | --------------------------------------------- |
| **I. Introduction**             | 深空/空间通信存在中断、长时延；DTN/LTP关键性                            | 引出研究空缺：缺少“中断影响的理论模型”                          |
| **II. LTP Mechanisms**          | RDS/CP/RS/RA可靠传输流程                                    | 为建模做准备                                        |
| **III. ISS-TDRSS Architecture** | 解释为什么空间站链路会中断                                         | 说明中断的真实背景                                     |
| **IV. Analytical Models（核心）**   | 数学推导：<br>➤ Case 1 下行中断<br>➤ Case 2 上行中断<br>➤ BER + 中断 | **论文重点**：得到 $T_{break-affect}$、$T_{file}$ 等公式 |
| **V. Experiment Setup**         | 使用 NASA ION 模拟真实空间链路                                  | 准备验证模型                                        |
| **VI. Results**                 | 图 6、10、11、12：模型 vs 实验高度吻合                             | 定量证明模型正确                                      |
| **VII. Conclusion**             | 中断越长、越早、打在下行→代价越大                                     | 研究启示与未来方向                                     |

---





---

#  **公式 (24)–(37) 的完整逻辑链条

整段 IV-B 的逻辑本质上是：

> **在文件传输中，一切额外时间都来自两类损失：
> （1）信道误码造成 segment 损坏
> （2）链路中断造成 segment 无法送达
> 所以文件总时延 = 基本时延 + segment 重传 + CP 等待 + RS 等待 + 中断影响。**

下面从最底层开始理解。

---

## **第一步：信道误码的本质（公式 24–26）**

我们知道 BER（bit error rate）= p
→ 每个 bit 发生错误的概率是 p。

一个 segment长度是 L bytes
→ bit 数 = 8 × L

**只要一个 bit 错，整个 segment 就算坏了**
（这是通信系统的典型假设）

所以，segment 传输成功的概率是：

$$(1-p)^{8L}$$

所以失败概率（误码概率）就是：

$$\rho = 1 - (1-p)^{8L}$$

因此有三类 segment：

| segment 类型 | 对应误码概率公式                            |
| ---------- | ----------------------------------- |
| 普通数据段 RDS  | $\rho_{Seg}=1-(1-p)^{8L_{Seg}}$ |
| RS 段       | $\rho_{RS}=1-(1-p)^{8L_{RS}}$   |
| CP 段       | $\rho_{CP}=1-(1-p)^{8L_{CP}}$   |

→ 它们分别对应公式 **(24)–(26)**。

**解释：**
更长的 segment 更容易坏，因为需要正确的 bit 更多。

---

## **第二步：一个 segment 坏了，需要传多少次？（公式 27）**

假设一次 transmission 的成功概率是：

* 对普通数据段：$1-\rho_{Seg}$

如果 segment 在误码下的命运是：
**成功 with probability (1−ρ)**
**失败 with probability ρ**

那么为了得到一次“成功”，传输次数服从几何分布：

$$E[\text{传输次数}] = \frac{1}{1-\rho}$$

但是，这里讨论的是：

> **一个 block（含多个 segments）全部成功的期望传输次数。**

因此约化为：

$$n =
\left\lceil
\log_{\rho_{Seg}}
\left(
\frac{1}{N_{Seg}(1-\rho_{Seg})}
\right)
\right\rceil
\tag{27}$$

该公式来自之前论文 [22]，本质含义是：

* 一个 block 有 $N_{Seg}$ 个 segment
* 只要其中一个 segment 未成功 → block 需要继续尝试
* 所以 block-level 成功概率与 segment-level 成功概率有关

**一句话：**

> 公式 (27) 给出为了让一个 block 全部 segments 成功，需要的期望尝试次数 n。

---

## **第三步：文件中到底有多少 segments？（公式 29）**

一个文件被切分成多个 LTP blocks
每个 block 又被切分成 $N_{Seg}$ 个 segments
所有 session 之间又被 bundle 聚合

因此总 segment 数为：

$$N_{Seg-total}
=

N_{block} \times N_{Seg}$$

但 block 数 = 文件大小 / bundle 大小
所以最终公式为：

$$N_{Seg-total}
=

\left\lceil \frac{L_{file}}{L_{bundle}} \right\rceil
\times
\left( \frac{N_{Seg}}{m \times N_{session}} \right)
\tag{29}$$

**这决定我们要传多少 segments。**

---

## **第四步：传所有 segments 需要多少时间？（公式 30）**

每个 segment 的传输时间是：

$$\frac{L_{Seg}}{Rb_{data}}$$

但一个 segment 平均要传：

$$\frac{1}{1-\rho_{Seg}}$$

次才能成功。

最后乘上 segment 总数 $N_{Seg-total}$，得到：

$$T_{Seg-total}
=

\frac{L_{Seg}}{Rb_{data}}
\times
N_{Seg-total}
\times
\frac{1}{1 - \rho_{Seg}}
\tag{30}$$

**解释：**
越容易坏（ρ高） → 需要更多重传 → 时间越长。

---

## **第五步：传播时延累计（公式 31）**

传播时延 = 往返传播时间 × block 成功尝试次数 × block 数

往返传播时延是：

$$2T_{owlt} + T_{RS}$$

成功一次 block 要 n 次 attempts，
文件共有 $N_{block}$ 个 blocks，所以：

$$T_{delay-total}
=

N_{block} \times n \times (2T_{owlt} + T_{RS})
\tag{31}$$

**解释：**
即使每次都成功，传播时延累积占很大比重（深空延迟高）。

---

## **第六步：CP RTO 等待时间（公式 32）**

如果 CP 被误码破坏（概率 $\rho_{CP}$），
发送方必须等待一个完整的 RTO 周期才能重传。

期望传输次数为：

$$\frac{1}{1-\rho_{CP}}$$

所以浪费的等待时间为：

$$T_{CP-wait}
=

\left(
\frac{1}{1-\rho_{CP}} - 1
\right)
\times
N_{block} \times n \times T_{RTO-CP}
\tag{32}$$

**解释要点（非常关键）：**

* CP 是整个 block 的“结束标记”
* 丢了 CP → RS 不会产生 → 必须等 RTO
* 一个 CP 错误造成的代价远大于普通 segment（**这就是结论**）

---

## **第七步：RS RTO 等待时间（公式 33）**

如果 RS 被误码破坏（概率 $\rho_{RS}$）
接收方必须等待一个 RS 的 RTO 触发重传。

同理：

$$T_{RS-wait}
=

\left(
\frac{1}{1-\rho_{RS}} - 1
\right)
\times
N_{block} \times n \times T_{RTO-RS}
\tag{33}$$

---

## **第八步：链路中断的额外时间（公式 34）**

这一项来自前面的 Section IV-A：
$$T_{break-affect}
=

T_{break}
+
T'_{block}
\tag{34}$$

解释：

* 中断本身持续 $T_{break}$
* 中断期间丢的 segments 要在恢复后重传，耗时 $T′_{block}$

---

## **第九步：把所有部分加起来（公式 28 → 36）**

文件传输总时间为：

$$T_{file-delivery}
=

T_{Seg-total}
+
T_{CP-wait}
+
T_{RS-wait}
+
T_{delay-total}
+
T_{break-affect}
\tag{28}$$

把前面公式 (30)–(34) 代入，就得到最终表达式：

$$T_{file-delivery} = \dots \tag{36}$$

（原文把公式展开在下一页）

**总结：**

> 文件总时延 =
> 数据段传输时间 + 等待 CP 的 RTO + 等待 RS 的 RTO + 传播时延 + 中断带来的额外重传

这就是 IV-B 的最终目的。

---

## **第十步：Goodput（有效吞吐率）公式 (37)**

既然我们算出了文件传输时间，
有效吞吐率就很容易：

$$\gamma_{Goodput}
=

\frac{L_{file}}{T_{file-delivery}}
\tag{37}$$

**解释：**

> 文件越大、时间越短 → goodput 越高
> 错误越多、中断越严重 → goodput 越差。

---

# **完整逻辑链条一句话总结**

> **公式 (24)–(37) 的目的，是把“误码概率 + 中断次数 + 重传次数 + RTO 等待 + segment 个数 + propagation delay”全部纳入一个统一的数学框架中，用来计算文件总传输时间与 goodput。**

---



# 演讲稿（）

下面来介绍本论文中最关键的内容，也就是第四章 B 小节，它主要研究链路中断和信道误码对 LTP 传输性能的联合影响。
这部分的目标非常明确，就是想要构建一个完整的解析模型，用数学的方式解释在真实的空间通信环境中，一个文件从空间站传到地面，到底会受到哪些因素的影响，以及这些因素最终如何共同决定文件传输时间。

---

首先，我们从最底层的误码机制开始。假设信道的比特误码率是 p，也就是说每一个比特都有概率出错。一个 segment，包括数据段、CP 或 RS，可以看成由很多 bit 组成，只要其中有任意一个 bit 出错，这整个 segment 就失效。论文用公式（24）到（26）计算了三类 segment 的误码概率。它们的共同特点是：segment 越长，被破坏的概率越高。这一步其实就是把最基本的 BER 概念转化成具体的“segment 级”的错误概率。

---

接着，我们进入第二个关键问题：一个 block 需要尝试多少次才能完成一次成功的传输？
因为一个 LTP block 是由多个 segment 构成的，只要其中任意一个 segment 出错，这个 block 就算失败，必须再尝试一次。所以，block 的成功概率取决于 segment 的成功概率。论文引用了我们此前的研究结果，并通过公式（27）得到了一个 block 的期望传输次数，用 n 来表示。
你可以把这一点理解为：“segment 越容易坏，那么 block 的平均尝试次数就越多”。

---

有了这些基础，我们需要知道一件事：整个文件到底包含多少个 segment？
论文通过公式（29）把文件大小、bundle 聚合、以及每个 block 的 segment 数量结合在一起，给出了文件中 segment 的总数量。这个值非常关键，因为后面所有时间开销——包括重传、传播时延、CP 等待时间，都会随着 segment 数量线性增长。

---

做到这里，我们就可以正式计算“文件传输的总时间”了。整段 IV-B 的核心思想，是把文件传输的时间拆成五个部分，这五部分在公式（28）中一起累加。下面我依次说明这五个部分的含义。

---

第一个部分，是所有数据段的传输时间，对应公式（30）。
因为每个 segment 被误码破坏的概率是固定的，所以 segment 的成功传输次数符合几何分布，也就是说平均要传一除以成功概率这么多次才能成功。把这个期望次数乘上 segment 的总数和每个 segment 的传输时间，就得到了整个文件的数据传输时间。如果误码率越高，这个部分就会显著增加。

---

第二个部分，是传播时延的累积，对应公式（31）。
在深空链路中，往返传播时延非常明显，一个单向传播可能就是几十毫秒甚至上百毫秒。每一个 block 的成功传输都需要经历 n 次尝试，而文件要由很多 blocks 组成，所以这些传播时延会被不断叠加。因此，信道越差、block 尝试次数越多，传播时延就会被放大得越厉害。

---

第三个部分，是 CP 的等待时间，也就是 CP 因为被误码破坏而触发 RTO 的代价，对应公式（32）。
CP 是一个 block 的结束标记，如果 CP 出错，接收方无法生成 RS，发送方只能默默等待一个完整的 RTO 周期，然后才能继续传输。相比普通的数据段，CP 出错的后果要严重得多，它会让发送端停顿很长时间。所以 CP 的误码概率，是整个可靠传输中最关键的因素之一。

---

第四个部分，是 RS 导致的等待时间，对应公式（33）。
RS 是接收端告诉发送端“哪些 segment 收到了”的报告，它也可能因为误码而丢失。如果 RS 丢了，接收方会等待 RTO，然后重发 RS。虽然 RS 的重要性略低于 CP，但当误码较高时，这部分等待时间仍然会对整体性能造成显著影响。

---

第五个部分，是链路中断带来的额外开销，对应公式（34）。
链路中断期间，所有正在传输的 segments 都等于白发了，等链路恢复之后还要把它们重新发一遍。这个额外时间等于中断本身的持续时间，再加上重新传输丢失 segments 所需的时间。也就是说，中断越久、越早发生，或者刚好发生在 CP 附近，它对整体传输的影响就越大，这一点在实验中体现得非常明显。

---

最后，我们把刚才提到的五个部分全部加起来，根据公式（28）可以得到文件传输的完整时延表达式。把前面的公式代入，就得到了论文给出的总表达式（36）。有了总时间以后，我们就可以进一步计算文件传输的有效吞吐率，也就是 goodput，这在公式（37）中给出，等于文件大小除以文件传输时间。

---

总体来说，本小节的贡献就是构建了一个统一的数学框架，把信道误码、segment 长度、block 的尝试次数、CP 和 RS 的 RTO 等待时间，以及链路中断的持续时长全部整合到一起，给出了一个可以预测实际文件传输时间的模型。这个模型在后续的实验中也得到了验证，证明它对真实空间站通信的行为有非常好的解释能力。












---
---
---


# 附录（）

## 本部分翻译+公式：


---

# **B. Modeling the Joint Effect of Link Disruption and Channel Error

设信道的比特误码率（BER）为 **p**。
记：

* 数据段（data segment）的长度为 **$L_{Seg}$**
* RS 的长度为 **$L_{RS}$**
* CP 的长度为 **$L_{CP}$**

三者单位均为 **bytes**。

那么，一个给定的传输 segment（任意 RDS/CP/RS）遭受传输错误的概率可写为：

$$\rho_{Seg} = 1 - (1 - p)^{8 \times L_{Seg}} \tag{24}$$

同理，RS 与 CP segment 的传输错误概率可写为：

$$\rho_{RS} = 1 - (1 - p)^{8 \times L_{RS}} \tag{25}$$

$$\rho_{CP} = 1 - (1 - p)^{8 \times L_{CP}} \tag{26}$$

---

平均传输次数（average number of total transmission attempts），
即发送方为了成功传输一个 block 所需的重传次数，记为 **n**。
该值根据我们先前的信道传输条件模型可得（公式源于参考文献 [22]）：

$$n =
\left\lceil
\log_{\rho_{Seg}}
\left(
\frac{1}{N_{Seg} \times (1 - \rho_{Seg})}
\right)
\right\rceil \tag{27}$$

其中 $N_{Seg}$ 表示构成整个 LTP block 的数据段数量。

---

在空间站通信中（space station communications），
文件的传输时延（file delivery time）可估算为：

$$T_{file-delivery}
=

T_{Seg-total}
+
T_{CP-wait}
+
T_{RS-wait}
+
T_{delay-total}
+
T_{break-affect} \tag{28}$$

其中：

* $T_{Seg-total}$：所有数据段（包括重传）的总传输时间
* $T_{CP-wait}$：由于 CP 段误码导致的 RTO 等待时间（不包括由链路中断导致的 CP 重传）
* $T_{RS-wait}$：由于 RS 段误码导致的 RTO 等待时间（不包括链路中断导致的 RS 重传）
* $T_{delay-total}$：所有段（包括重传）在传播时延上的累计总和
* $T_{break-affect}$：链路中断所带来的额外文件传输时间影响

下面依次推导上述五个部分。

---

# 🔹 **1) $T_{Seg-total}$**：数据段传输总时延

设：

* 文件总共拆分成 (N_{Seg-total}) 个数据段
* 这些 segment 由多个 session 聚合组成

其数量可写为：

$$N_{Seg-total}
=

 N_{block} \times N_{Seg}
=
\left\lceil \frac{L_{file}}{L_{bundle}} \right\rceil
\times
\left( \frac{N_{Seg}}{m \times N_{session}} \right)
\tag{29}$$

其中：

* $N_{block}$：文件被分成的 block 数
* $L_{file}$：文件大小
* $L_{bundle}$：每个 bundle 聚合的数据大小
* $N_{session}$：用于文件传输的 LTP session 数量
* $m$：每个 bundle 聚合的数据 block 数量

---

如果我们假设文件中所有数据段的传输次数（attempts）服从几何分布，
则 **给定数据段的期望传输次数**
在 BER 为 $\rho_{Seg}$ 的信道中为：

$$\left( \frac{1}{1 - \rho_{Seg}} \right)$$

因此，成功传输全部数据段的总时间可写为：

$$T_{Seg-total}
=

\frac{L_{Seg}}{Rb_{data}}
\times
N_{Seg-total}
\times
\frac{1}{1 - \rho_{Seg}}
\tag{30}$$

其中 $Rb_{data}$ 是数据传输速率。

---

# 🔹 **2) $T_{delay-total}$**：传播时延累计

由公式 (27) 可知，成功传输一个 block 需要 **n 次传输尝试（attempts）**。
假设每个 block 的传输互不依赖。

已知每个 session 内实际传输的 block 数为 (N_{block})，
则文件的传播时延（包含 RS 的传播时间）为：

$$T_{delay-total}
=

N_{block}
\times
n
\times
(2T_{owlt} + T_{RS})
\tag{31}$$

---

# 🔹 **3) $T_{CP-wait}$**：CP 引起的 RTO 等待时间

由于 CP 段也可能被误码破坏，其期望传输次数同样为：

$$\left( \frac{1}{1-\rho_{CP}} \right)$$

因此 CP 引起的总等待时间为：

$$T_{CP-wait}
=

\left(
\frac{1}{1 - \rho_{CP}} - 1
\right)
\times
N_{block}
\times
n
\times
T_{RTO-CP}
\tag{32}$$

这里 $T_{RTO-CP}$ 为 CP 的超时重传等待时间。

---

# 🔹 **4) (T_{RS-wait})**：RS 引起的 RTO 等待时间

同理，RS 的期望传输次数为：

$$\left( \frac{1}{1-\rho_{RS}} \right)$$

因此 RS 引起的等待时间为：

$$T_{RS-wait}
=

\left(
\frac{1}{1 - \rho_{RS}} - 1
\right)
\times
N_{block}
\times
n
\times
T_{RTO-RS}
\tag{33}$$

---

# 🔹 **5) $T_{break-affect}$**：链路中断造成的额外开销

如前文所述（Case 1 / Case 2 的推导），
当部分数据段因链路中断被破坏后，恢复链路后需要重新传输这些段，其耗时为：

$$T_{break-affect}
=

T_{break}
+
T'_{block}
\tag{34}$$

其中：

* $T_{break}$：链路中断持续时间
* $T'_{block}$：恢复后重新传输丢失 segments 的时间（公式见 IV-A 部分）

---

此外：

* 由链路中断导致的 CP 重传次数 **$N_{CP}$**
  已由公式 (13) 给出
* 由链路中断导致的 RS 重传次数 **$N_{RS}$**
  已由公式 (20) 给出

链路中断 + 信道误码的综合时间影响可写为（公式 (35)，位于原文下一页底部）。

---

将公式 (30)–(34) 代入 (28)，
即可得到包含 BER（p）的文件传输总时间：

$$T_{file-delivery} = \dots \tag{36}$$

（原文公式 36 在下一页，此处保持引用格式一致。）

---

最后，得到文件传输的 **goodput**（有效吞吐率）：

$$\gamma_{Goodput}
=

\frac{L_{file}}{T_{file-delivery}}
\tag{37}$$

---

