---
created: 2025-01-15T12
updated: ...
---
[[HOP+]]


# Objectives
分析模型训练过程中耗时较长的原因

# Results

## Problem1: 分析总体时间
- [?] 
表格，分别展示了每个 Agent 的：

* **MCTS 累计耗时**
* **最新一次 `compute_action()` 调用的耗时**
* **`compute_action()` 总累计耗时**

| Agent ID | MCTS 总耗时（秒） | 最新一次 compute\_action 耗时（秒） | compute\_action 累计总耗时（秒） |
| -------- | ----------- | -------------------------- | ------------------------ |
| Agent 1  | 397.9170    | 0.1188                     | 399.1039                 |
| Agent 2  | 370.8085    | 0.1198                     | 371.4923                 |
| Agent 3  | 506.2037    | 0.1526                     | 506.8729                 |
| Agent 4  | 399.3196    | 0.0370                     | 399.9435                 |

---

```
 pid=9964) [Timer] MCTS Total: 397.9170s | select: 272.7855s | expand: 121.8405s | backup: 3.2377s | final: 0.0532s 
 pid=9964) 1[Timer] Total: 0.1188s | T1: 0.0000s | T2: 0.0010s | T3: 0.1178s | Sum: 0.1188s 
 pid=9964) 1[Timer] Total Total: 399.1039s | self.timer_t1_total: 0.0110s | self.timer_t2_total: 0.9672s | self.timer_t3_total: 398.1257s 
```

### 🧩 各阶段说明

| 阶段代号     | 全称                   | 功能描述                                   |
| -------- | -------------------- | -------------------------------------- |
| **T1**   | `prepare`            | 数据准备与初始状态读取（如 obs 预处理、RNN 状态提取等）       |
| **T2**   | `subgoal planning`   | 子目标规划，调用智能体的子目标预测器（如 CVAE 网络等）         |
| **T3**   | `MCTS` 调用入口          | 实际执行蒙特卡洛树搜索（Monte Carlo Tree Search）逻辑 |
|          |                      | → 内部又细分为四个子阶段：                         |
| `select` | 节点选择（tree traversal） | 在当前搜索树上找到一个合适的节点（通常使用 UCB 等准则）         |
| `expand` | 节点扩展                 | 将选择的节点展开，生成新的子节点进行模拟                   |
| `backup` | 结果回传                 | 模拟结果回传更新节点的统计信息                        |
| `final`  | 动作选择/决策              | 基于 MCTS 输出选择最终动作                       |

---

### 综合分析：

* 从数据来看，**T3（调用 MCTS）是 compute\_action 中最耗时的阶段**，几乎占据全部耗时：

  * 如 Agent 3：`self.timer_t3_total ≈ 506.48s / 506.87s ≈ 99.9%`
* 而 T1、T2 几乎可以忽略，说明：

  * 状态准备与子目标预测效率较高；
  * 系统瓶颈完全聚焦在 MCTS 内部计算。
* 在 **MCTS 四阶段中**：

  * **select** 与 **expand** 耗时最高，分别约占 60% 和 35%，反映出搜索路径选择和树扩展代价最大；
  * **backup** 和 **final** 较快。


## Problem2: 
- [?] 

### 1_Answers


### 2_Answers



# Limitations
# Future Work
# FootNotes