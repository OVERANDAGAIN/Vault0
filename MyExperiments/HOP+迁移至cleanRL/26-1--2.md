---
创建时间: 2026-一月-12日  星期一, 5:27:10 下午
---
[[HOP+迁移至cleanrl]]


# Objectives






# MSH
`class StagHuntEnv:`
>Episode 长度可变:`self.final_time<=35`
>场景：8\*8
>观测大小：完全观测

```python
    # —— Environment / HOP+ Parameters (for make_hop_config) ——
    # --- msh params ---
    parser.add_argument("--msh-player-num", type=int, default=4)
    parser.add_argument("--msh-world-h", type=int, default=4)
    parser.add_argument("--msh-world-w", type=int, default=4)
    parser.add_argument("--msh-max-block-comp", type=int, default=0)
    parser.add_argument("--msh-final-time", type=int, default=35)
    parser.add_argument("--msh-prosocial", action="store_true", default=False)

    parser.add_argument("--msh-stag-num", type=int, default=1)
    parser.add_argument("--msh-hare-num", type=int, default=4)
    parser.add_argument("--msh-time-reward", type=float, default=0.0)
    parser.add_argument("--msh-stag-reward", type=float, default=10.0)
    parser.add_argument("--msh-hare-reward", type=float, default=1.0)
    parser.add_argument("--msh-dynamic-final-time", action="store_true", default=False)
    parser.add_argument("--msh-final-time-after-first-hunt", type=int, default=5)

```

|       算法       | Policy | Average Reward | Remark |
| :------------: | :----: | :------------: | ------ |
| learning-based |  4PPO  |       1        | Defeat |

```
tensorboard --logdir="/home/fengxue/projects/hopplus/cleanRL/runs/MSH_noGoal_HOPp-HOPp-HOPp-HOPp__8__20260112_172619"
```


```
tensorboard --logdir="/home/fengxue/projects/hopplus/cleanRL/runs/MSH_noGoal_HOPp-HOPp-HOPp-HOPp__8__20260114_190514"
```

```
tensorboard --logdir="/home/fengxue/projects/hopplus/cleanRL/runs/MSH_noGoal_HOPp-HOPp-HOPp-HOPp__8__20260115_132701"
```


```
tensorboard --logdir="/home/fengxue/projects/hopplus/cleanRL/runs/MSH_noGoal_HOPp-HOPp-HOPp-HOPp__8__20260119_145815"
```



# MSD
* **RandomPolicy（MSD）**：在当前可行动作里均匀随机选一个动作。

* **FixPolicy（MSD）**：只在前 5 个动作（通常不包含特殊动作）里随机选一个可行动作。

* **NearestDriftPolicy（MSD）**：若脚下有雪则清雪，否则朝视野内最近的雪堆移动；看不到雪就随机走。

`class SnowDriftEnv:`
>Episode 长度固定 `self.final_time=50`

>场景：4\*4 ; 4Agent; 6Drift ; Reward=6 ; Cost = 4
>观测大小：完全观测

```python
    # --- msd params ---
    parser.add_argument("--msd-player-num", type=int, default=4)
    parser.add_argument("--msd-world-h", type=int, default=6)
    parser.add_argument("--msd-world-w", type=int, default=6)
    parser.add_argument("--msd-max-block-comp", type=int, default=0)
    parser.add_argument("--msd-final-time", type=int, default=50)
    parser.add_argument("--msd-prosocial", action="store_true", default=False)

    parser.add_argument("--msd-drift-num", type=int, default=6)
    parser.add_argument("--msd-reward", type=float, default=6)
    parser.add_argument("--msd-cost", type=float, default=4)

```

|       算法       |     Policy     |            Average Reward            | Remark                          |
| :------------: | :------------: | :----------------------------------: | ------------------------------- |
|   rule-based   |      4FIX      | ![[Pasted image 20260120165009.png]] | 都是0，合理 $\Longrightarrow$ 没有人去打扫 |
|       ^        |      4ND       | ![[Pasted image 20260120170317.png]] |                                 |
|       ^        |     4RAND      | ![[Pasted image 20260120172158.png]] | 可能是由于地图太小                       |
| learning-based |    PPO+3ND     | ![[Pasted image 20260120180155.png]] |                                 |
|       ^        |    2PPO+2ND    | ![[Pasted image 20260120181953.png]] |                                 |
|       ^        |    3PPO+ND     | ![[Pasted image 20260120184720.png]] |                                 |
|       ^        |      4PPO      | ![[Pasted image 20260120211321.png]] |                                 |
|       ^        | 1GOAL_noWM 3ND | ![[Pasted image 20260120214357.png]] |                                 |


`class SnowDriftEnv:`
>Episode 长度固定 `self.final_time=50`

>场景：6\*6 ; 4Agent; 6Drift ; Reward=6 ; Cost = 4
>观测大小：完全观测


|       算法       | Policy |              Average Reward              | Remark |
| :------------: | :----: | :--------------------------------------: | ------ |
| learning-based |  4PPO  | ![[Pasted image 20260121223415.png]]<br> |        |

`class SnowDriftEnv:`
>Episode 长度固定 `self.final_time=50`

>场景：8\*8 ; 4Agent; 6Drift ; Reward=6 ; Cost = 4
>观测大小：完全观测


|       算法       | Policy |              Average Reward              | Remark |
| :------------: | :----: | :--------------------------------------: | ------ |
| learning-based |  4PPO  | ![[Pasted image 20260121223436.png]]<br> |        |



# CoinGame
* **CG_RandomPolicy（CoinGame）**：在可行动作里均匀随机选一个移动动作。

* **NearestCoinPolicy（CoinGame, NC）**：朝视野内最近的任意颜色硬币移动；看不到硬币就随机走。

* **OnlyOwnCoinPolicy（CoinGame, OC）**：只追自己颜色的硬币并避免踩到对手硬币；看不到自己硬币就随机安全移动。

`class CoinGame():`
>Episode 长度固定:`self.final_time=100`
>场景：5\*5 ; 2Agent
>观测大小：完全观测
```python
    # --- coingame params ---
    parser.add_argument("--coingame_player_num", type=int, default=2)
    parser.add_argument("--coingame_world_h", type=int, default=5)
    parser.add_argument("--coingame_world_w", type=int, default=5)
    parser.add_argument("--coingame_final_time", type=int, default=100)
    parser.add_argument("--coingame_coin_num", type=int, default=1)

    parser.add_argument("--coingame_my_coin_reward", type=int, default=1)
    parser.add_argument("--coingame_other_coin_reward", type=int, default=-2)
    parser.add_argument("--coingame_obs_h", type=int, default=5)
    parser.add_argument("--coingame_obs_w", type=int, default=5)
```

|       算法       | Policy  |              Average Reward              | Remark                    |
| :------------: | :-----: | :--------------------------------------: | ------------------------- |
|   rule-based   | 2OC_old |   ![[Pasted image 20260121215809.png]]   | 7.5\*2min接近0说明，对手不拿自己的金币？ |
|       ^        |   2OC   |   ![[Pasted image 20260121221605.png]]   | min接近0说明，对手不拿自己的金币？       |
|       ^        |   2NC   | ![[Pasted image 20260121222114.png]]<br> |                           |
|                | 2RANDOM |   ![[Pasted image 20260121222640.png]]   |                           |
| learning-based |  2PPO   |   ![[Pasted image 20260122135811.png]]   |                           |






# CleanUp
* **CU_RandomPolicy（Cleanup）**：在当前可行动作里均匀随机选一个动作（包含 CLEAN/APPLE 只要 mask 允许）。

* **NearestApplePolicy（Cleanup, NA）**：能采苹果就采，否则朝视野内最近的苹果移动；看不到苹果就随机走。

* **NearestWasteThenApplePolicy（Cleanup, NWNA）**：能清垃圾就清，否则朝视野内最近的垃圾移动；若无垃圾则按同样规则采/追苹果；都看不到就随机走。
`class CleanupEnv():`
>Episode 长度固定:`self.final_time=100`
>观测大小：完全观测

```python
    # --- cleanup params ---
    parser.add_argument("--cleanup_player_num", type=int, default=4)
    parser.add_argument("--cleanup_world_h", type=int, default=8)
    parser.add_argument("--cleanup_world_w", type=int, default=8)
    parser.add_argument("--cleanup_final_time", type=int, default=100)

    parser.add_argument("--cleanup_obs_h", type=int, default=5)
    parser.add_argument("--cleanup_obs_w", type=int, default=5)
    parser.add_argument("--cleanup_window_size", type=int, default=2)

    parser.add_argument("--cleanup_waste_num_origin", type=int, default=8)
    parser.add_argument("--cleanup_waste_cost", type=float, default=0.0)
    parser.add_argument("--cleanup_apple_reward", type=float, default=1.0)

    parser.add_argument("--cleanup_be_punished_cost", type=float, default=0.0)
    parser.add_argument("--cleanup_punish_cost", type=float, default=0.0)
    parser.add_argument("--cleanup_clean_beam_len", type=int, default=5)

    parser.add_argument("--cleanup_apple_respawn_prob", type=float, default=0.4)
    parser.add_argument("--cleanup_waste_spawn_prob", type=float, default=0.5)
    parser.add_argument("--cleanup_threshold_depletion", type=float, default=0.5)
    parser.add_argument("--cleanup_threshold_restoration", type=float, default=0.0)

```

|       算法       |     Policy     |              Average Reward              | Remark |
| :------------: | :------------: | :--------------------------------------: | ------ |
|   rule-based   |     4NWNA      | ![[Pasted image 20260122125057.png]]<br> |        |
|       ^        |      4NA       |   ![[Pasted image 20260122125205.png]]   |        |
|       ^        |    4Random     | ![[Pasted image 20260122124109.png]]<br> |        |
| learning-based | 1ppo+3NWNA<br> |   ![[Pasted image 20260122135643.png]]   |        |
|       ^        |    RUNNING     |                                          |        |


